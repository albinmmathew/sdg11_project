{% extends 'issues/base.html' %}

{% block content %}
<h2 class="mb-3">Reported Issues</h2>
{% if messages %}
        {% for message in messages %}
            <p class="{{ message.tags }}">{{ message }}</p>
        {% endfor %}
{% endif %}
<a href="{% url 'report_issue' %}" class="btn btn-primary mb-4">
    + Report New Issue
</a>

{% for issue in issues %}
<div class="card mb-3">
    <div class="card-body">
        <h5 class="card-title">{{ issue.title }}</h5>
        <p class="card-text">{{ issue.description }}</p>

        <p class="mb-1"><strong>Location:</strong> {{ issue.location }}</p>
        <p class="mb-1"><strong>Status:</strong>
            <span class="badge bg-info text-dark">{{ issue.status }}</span>
        </p>
        <p><strong>Votes:</strong> {{ issue.votes }}</p>

        <form action="{% url 'upvote_issue' issue.id %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-success btn-sm">
                üëç Upvote
            </button>
        </form>
    </div>
</div>
{% empty %}
<p>No issues reported yet.</p>
{% endfor %}
{% endblock %}
